<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MTI-EVO Control Center</title>
  <!-- Cyberpunk Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=2.3" />
  <link rel="stylesheet" href="hud-overlay.css?v=2.3" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
</head>

<body>
  <!-- CYBERPUNK HUD OVERLAYS -->
  <div class="hex-grid"></div>
  <div class="scanlines"></div>
  <div class="vignette"></div>

  <!-- TARGET LOCK RETICLE -->
  <div class="target-lock" id="targetLock">
    <svg viewBox="0 0 80 80">
      <circle cx="40" cy="40" r="35" class="lock-ring" />
      <circle cx="40" cy="40" r="25" class="lock-inner" />
      <line class="crosshair" x1="40" y1="5" x2="40" y2="20" />
      <line class="crosshair" x1="40" y1="60" x2="40" y2="75" />
      <line class="crosshair" x1="5" y1="40" x2="20" y2="40" />
      <line class="crosshair" x1="60" y1="40" x2="75" y2="40" />
    </svg>
    <div class="lock-label" id="targetLabel">NO SIGNAL</div>
  </div>

  <!-- THREAT LEVEL INDICATOR (Data-bound) -->
  <div class="threat-indicator draggable" id="threatIndicator">
    <div class="threat-label">SYSTEM_THREAT</div>
    <div class="threat-bars">
      <div class="threat-bar" data-level="1"></div>
      <div class="threat-bar" data-level="2"></div>
      <div class="threat-bar" data-level="3"></div>
      <div class="threat-bar" data-level="4"></div>
      <div class="threat-bar" data-level="5"></div>
      <div class="threat-bar" data-level="6"></div>
      <div class="threat-bar" data-level="7"></div>
      <div class="threat-bar" data-level="8"></div>
    </div>
  </div>

  <!-- PERIPHERAL SCAN ARCS -->
  <div class="scan-arc top-left">
    <svg viewBox="0 0 200 200">
      <path d="M 10 100 A 90 90 0 0 1 100 10" stroke-dasharray="150" />
      <path class="sweep" d="M 10 100 A 90 90 0 0 1 100 10" stroke-dasharray="150" stroke-dashoffset="150" />
    </svg>
  </div>

  <div id="app">
    <!-- TOP HEADER BAR -->
    <header id="header">
      <div class="header-left">
        <div class="logo">
          <span class="logo-symbol">‚¨°</span>
          <span class="logo-text">MTI-EVO</span>
          <span class="version-badge">v2.0</span>
        </div>
      </div>
      <div class="header-center">
        <div class="status-indicators">
          <div class="indicator">
            <span class="indicator-dot" id="apiStatus"></span>
            <span>API</span>
          </div>
          <div class="indicator">
            <span class="indicator-dot" id="brainStatus"></span>
            <span>Brain</span>
          </div>
          <div class="indicator">
            <span class="indicator-dot" id="llmStatus"></span>
            <span>LLM</span>
          </div>
        </div>
      </div>
      <div class="header-right">
        <div class="stats-bar">
          <div class="stat"><span class="stat-value" id="headerNeurons">‚Äî</span><span class="stat-label">Neurons</span>
          </div>
          <div class="stat"><span class="stat-value" id="headerLatency">‚Äî</span><span class="stat-label">Latency</span>
          </div>
        </div>
      </div>
    </header>

    <div id="main-layout">
      <!-- SIDEBAR NAV -->
      <nav id="sidebar">
        <div class="nav-group">
          <button class="nav-item active" data-tab="brain">
            <span class="nav-icon">üß¨</span>
            <span class="nav-text">Brain 3D</span>
          </button>
          <button class="nav-item" data-tab="hive">
            <span class="nav-icon">üåê</span>
            <span class="nav-text">HIVE</span>
          </button>
          <button class="nav-item" data-tab="latent">
            <span class="nav-icon">üìä</span>
            <span class="nav-text">Latent</span>
          </button>
          <button class="nav-item" data-tab="activity">
            <span class="nav-icon">üî•</span>
            <span class="nav-text">Activity</span>
          </button>
          <button class="nav-item" data-tab="metrics">
            <span class="nav-icon">üìà</span>
            <span class="nav-text">Metrics</span>
          </button>
          <button class="nav-item" data-tab="playground">
            <span class="nav-icon">üéÆ</span>
            <span class="nav-text">Playground</span>
          </button>
          <button class="nav-item" data-tab="projects">
            <span class="nav-icon">üöÄ</span>
            <span class="nav-text">Projects</span>
          </button>

          <div style="flex:1"></div> <!-- Spacer -->

          <button class="nav-item" data-tab="settings">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-text">Settings</span>
          </button>
        </div>
      </nav>

      <!-- MAIN CONTENT -->
      <main id="content">

        <!-- BRAIN 3D TAB -->
        <section id="tab-brain" class="tab-panel active">
          <div class="panel-header">
            <h2>Neural Topology</h2>
            <div class="controls">
              <div class="control-group">
                <label>Seed</label>
                <input id="brainSeed" type="text" value="consciousness" placeholder="Enter seed..." />
              </div>
              <div class="control-group">
                <label>Steps</label>
                <input id="brainSteps" type="number" value="10" min="1" max="50" />
              </div>
              <button class="btn primary" id="btnDream">
                <span>üåô</span> Dream
              </button>
              <button class="btn secondary" id="btnInterview">
                <span>üîç</span> Interview
              </button>
              <button class="btn ghost" id="btnRefresh">
                <span>‚Üª</span>
              </button>
            </div>
          </div>

          <div class="panel-body">
            <div class="viewport">
              <canvas id="brain-canvas"></canvas>

              <!-- AR HUD OVERLAY -->
              <div id="hud-layer">
                <!-- Top Center: Cognitive Drift -->
                <div class="hud-widget hud-top-center draggable">
                  <div class="tech-panel-framed hud-container">
                    <div class="tech-header">
                      <span>COGNITIVE DRIFT</span>
                      <span class="tech-label">SYS.01</span>
                    </div>
                    <div class="drift-gauge">
                      <div class="drift-bar-container">
                        <div class="drift-zone logic">LOGIC</div>
                        <div class="drift-needle" id="driftNeedle"></div>
                        <div class="drift-zone dream">DREAM</div>
                      </div>
                      <div class="drift-value tech-value" id="driftValue">0.00</div>
                    </div>
                  </div>
                </div>

                <!-- Bottom Right: Hardware -->
                <div class="hud-widget hud-bottom-right draggable">
                  <div class="tech-panel-framed hud-container">
                    <div class="tech-header">
                      <span>CORE REACTOR</span>
                      <span class="tech-label">HW.05</span>
                    </div>
                    <div class="reactor-container" style="margin-bottom: 10px;">
                      <!-- Outer Ring (Counter-Clockwise) -->
                      <svg class="reactor-ring outer" viewBox="0 0 100 100">
                        <circle class="reactor-bg" cx="50" cy="50" r="45"></circle>
                        <circle class="reactor-progress" id="vramCircleOuter" cx="50" cy="50" r="45"></circle>
                      </svg>
                      <!-- Inner Ring (Clockwise) -->
                      <svg class="reactor-ring inner" viewBox="0 0 100 100">
                        <circle class="reactor-bg" cx="50" cy="50" r="35"></circle>
                        <circle class="reactor-progress" id="vramCircleInner" cx="50" cy="50" r="35"></circle>
                      </svg>
                      <div class="reactor-core">
                        <span class="reactor-label">VRAM</span>
                        <span class="reactor-value tech-value" id="vramValue" style="font-size: 14px;">--%</span>
                      </div>
                    </div>
                    <div class="tensor-flux"
                      style="border-top: 1px dashed var(--border-subtle); padding-top: 5px; width: 100%; text-align: right;">
                      <span class="flux-label">TENSOR_FLUX</span>
                      <span class="flux-value tech-value" id="tensorValue" style="font-size: 14px;">0 t/s</span>
                    </div>
                  </div>
                </div>

                <!-- Bottom Center: Waveform -->
                <div class="hud-widget hud-bottom-center draggable">
                  <div class="tech-panel-framed hud-container">
                    <div class="tech-header">
                      <span>NEURAL OSCILLATION</span>
                      <span class="tech-label">WAVE.09</span>
                    </div>
                    <canvas id="waveform-canvas" width="300" height="60"></canvas>
                  </div>
                </div>

                <!-- Top Right: System -->
                <div class="hud-widget hud-top-right draggable">
                  <div class="tech-panel-framed hud-container">
                    <div class="tech-header">
                      <span>VITALS</span>
                      <span class="tech-label">NET.03</span>
                    </div>
                    <div class="system-stat">
                      <span class="stat-name">FPS</span>
                      <span class="stat-val tech-value" id="hudFps">60</span>
                    </div>
                    <div class="system-stat">
                      <span class="stat-name">NET</span>
                      <span class="stat-val tech-value" id="hudPing">--ms</span>
                    </div>
                  </div>
                </div>

                <!-- Bottom Left: Target -->
                <div class="hud-widget hud-bottom-left draggable" id="hudTarget">
                  <div class="target-header">NO_TARGET</div>
                  <div class="target-body">Select a neuron to analyze...</div>
                </div>

                <div class="viewport-stats legacy-hidden"> <!-- Legacy Hidden -->
                  <span id="nodeCount">Nodes: 0</span>
                  <span id="edgeCount">Edges: 0</span>
                </div>
              </div>

              <aside class="sidebar-panel">
                <div class="info-card">
                  <h4>System Status</h4>
                  <div class="info-grid">
                    <div class="info-item">
                      <span class="info-label">Neurons</span>
                      <span class="info-value" id="infoNeurons">‚Äî</span>
                    </div>
                    <div class="info-item">
                      <span class="info-label">Mode</span>
                      <span class="info-value" id="infoMode">‚Äî</span>
                    </div>
                    <div class="info-item">
                      <span class="info-label">Version</span>
                      <span class="info-value" id="infoVersion">‚Äî</span>
                    </div>
                    <div class="info-item">
                      <span class="info-label">Uptime</span>
                      <span class="info-value" id="infoUptime">‚Äî</span>
                    </div>
                  </div>
                </div>

                <div class="info-card">
                  <h4>Last Dream</h4>
                  <div class="result-text" id="dreamResult">‚Äî</div>
                </div>

                <div class="info-card">
                  <h4>Last Interview</h4>
                  <div class="result-text" id="interviewResult">‚Äî</div>
                </div>
              </aside>
            </div>
        </section>

        <!-- HIVE TAB -->
        <section id="tab-hive" class="tab-panel">
          <div class="panel-header">
            <h2>HIVE Network</h2>
            <div class="controls">
              <select id="flowFilter">
                <option value="all">All Flows</option>
                <option value="inference">Inference</option>
                <option value="control">Control</option>
              </select>
              <button class="btn ghost" id="refreshHive">‚Üª Refresh</button>
            </div>
          </div>
          <div class="panel-body full">
            <canvas id="hive-canvas"></canvas>
          </div>
        </section>

        <!-- LATENT TAB -->
        <section id="tab-latent" class="tab-panel">
          <div class="panel-header">
            <h2>Latent Space Immersion</h2>
            <div class="controls flex-row-center">
              <div class="latent-controls">
                <input type="number" id="scanStart" placeholder="Start Seed" class="hud-input hud-input-sm">
                <input type="number" id="scanEnd" placeholder="End Seed" class="hud-input hud-input-sm">
                <label class="hud-checkbox" title="Scan entire brain">
                  <input type="checkbox" id="scanAll"> ALL
                </label>
                <button id="btnDeepScan" class="hud-btn">DEEP SCAN</button>
                <button id="btnProbeLatent" class="hud-btn">PROBE</button>
                <button id="btnShowList" class="hud-btn">LIST</button>
              </div>
            </div>
          </div>
          <div class="panel-body full" style="padding:0; overflow:hidden; background:#000;">
            <canvas id="latent-canvas" class="full-canvas"></canvas>
          </div>
        </section>

        <!-- HEATMAP TAB -->
        <section id="tab-heatmap" class="tab-panel">
          <div class="panel-header">
            <h2>Activity Heatmap</h2>
            <div class="controls">
              <div class="control-group">
                <label>Time Bins</label>
                <input id="heatmapBins" type="number" value="20" min="5" max="100" />
              </div>
              <button class="btn primary" id="generateHeatmap">Generate</button>
            </div>
          </div>
          <div class="panel-body full">
            <svg id="heatmap-svg"></svg>
          </div>
        </section>

        <!-- METRICS TAB -->
        <section id="tab-metrics" class="tab-panel">
          <div class="panel-header">
            <h2>Global Metrics</h2>
            <div class="controls">
              <label class="toggle">
                <input type="checkbox" id="autoRefreshMetrics" checked />
                <span>Auto-refresh</span>
              </label>
              <button class="btn ghost" id="exportMetrics">üì• Export</button>
            </div>
          </div>
          <div class="panel-body metrics-layout">
            <div class="metrics-grid">
              <div class="metrics-chart-container"
                style="grid-column: 1 / -1; height: 300px; background: rgba(0,0,0,0.3); border: 1px solid var(--border-color); margin-bottom: 20px;">
                <div id="metricsChart" style="width:100%; height:100%;"></div>
              </div>

              <div class="metric-card">
                <div class="metric-card">
                  <div class="metric-icon">‚ö°</div>
                  <div class="metric-content">
                    <span class="metric-value" id="metricActP95">‚Äî</span>
                    <span class="metric-label">Activation P95</span>
                  </div>
                </div>
                <div class="metric-card">
                  <div class="metric-icon">‚è±Ô∏è</div>
                  <div class="metric-content">
                    <span class="metric-value" id="metricLatency">‚Äî</span>
                    <span class="metric-label">API Latency</span>
                  </div>
                </div>
                <div class="metric-card">
                  <div class="metric-icon">üß†</div>
                  <div class="metric-content">
                    <span class="metric-value" id="metricSeeds">‚Äî</span>
                    <span class="metric-label">Active Seeds</span>
                  </div>
                </div>
              </div>
              <div class="logs-section">
                <h4>Event Log</h4>
                <pre id="live-logs"></pre>
              </div>
            </div>
        </section>


        <!-- ACTIVITY TAB (HEATMAP) -->
        <div id="tab-activity" class="tab-panel">
          <div class="panel-header">
            <h2>Activity Heatmap (3D)</h2>
            <div class="panel-controls">
              <div class="input-group">
                <label>Time Bin:</label>
                <input type="number" id="heatmapBins" value="20" style="width:60px">
              </div>
              <button id="generateHeatmap" class="btn primary">Generate</button>
            </div>
          </div>
          <div class="panel-content" style="flex:1; padding:0; overflow:hidden; position:relative;">
            <canvas id="heatmap-canvas" style="width:100%; height:100%; display:block; outline:none;"></canvas>
          </div>
        </div>

        <!-- PLAYGROUND TAB (PHASE 54) -->
        <section id="tab-playground" class="tab-panel">
          <div class="panel-header">
            <h2>Playground & Audit</h2>
            <div class="controls">
              <span id="activeScriptLabel"
                style="color: var(--accent-cyan); font-family: 'Orbitron'; margin-right: 15px;">IDLE</span>
              <button class="btn primary" id="btnRunScript">‚ñ∂ RUN CODE</button>
              <button class="btn secondary" id="btnKillScript">‚ñ† STOP</button>
            </div>
          </div>
          <div class="panel-body full" style="display: flex; gap: 10px; padding: 10px;">
            <!-- Script List -->
            <div class="script-list-container" <h3>üß™ Testing Playground</h3>
              <div class="toolbar">
                <span id="activeScriptLabel" style="font-family:monospace; color:#0ff;">No Script Selected</span>
                <span class="divider">|</span>
                <span id="currentPid" class="tag active">--</span>
              </div>
            </div>
            <div class="panel-body" style="display:flex; gap:1px; background:#222;">
              <!-- LEFT: SCRIPT LIST -->
              <div id="scriptList"
                style="width: 250px; background: #000; border-right: 1px solid #333; overflow-y: auto;">
                <!-- Items injected here -->
              </div>

              <!-- RIGHT: CONFIG & CONSOLE -->
              <div style="flex: 1; display: flex; flex-direction: column; background: #050505;">

                <!-- CONFIG PANEL -->
                <div id="playgroundConfig" style="padding: 15px; border-bottom: 1px solid #333; background: #0a0a10;">
                  <div id="scriptDescription" style="color: #888; margin-bottom: 10px; font-style: italic;">
                    Select a test script to configure parameters.
                  </div>
                  <!-- Dynamic Form -->
                  <div id="scriptParams"
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-bottom: 10px;">
                  </div>

                  <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button id="btnRunScript" class="btn primary">‚ñ∂ RUN TEST</button>
                    <button id="btnKillScript" class="btn danger">‚èπ STOP</button>
                  </div>
                </div>

                <!-- CONSOLE -->
                <div style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                  <div
                    style="padding: 5px 10px; background: #111; border-bottom: 1px solid #222; font-size: 10px; color: #666; font-family: monospace;">
                    CONSOLE OUTPUT
                  </div>
                  <pre id="playgroundConsole"
                    style="flex: 1; padding: 10px; overflow-y: auto; color: #0f0; margin: 0; white-space: pre-wrap; font-size: 12px; font-family: 'Consolas', monospace;"></pre>
                </div>
              </div>
            </div>
        </section>

        </section>

        <!-- PROJECTS TAB (NEW) -->
        <section id="tab-projects" class="tab-panel">
          <div class="panel-header">
            <h2>Active Projects (Roadmap)</h2>
            <div class="controls">
              <span class="tech-label">PHASE: EXECUTION</span>
            </div>
          </div>
          <div class="panel-body full projects-layout"
            style="display:flex; flex-direction:column; padding:20px; gap:20px;">
            <!-- Project Grid -->
            <div id="project-grid"
              style="display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:20px;">
              <!-- Injected by JS -->
            </div>

            <!-- Output Console -->
            <div class="project-console tech-panel-framed"
              style="flex:1; display:flex; flex-direction:column; min-height:200px; background:#050505;">
              <div class="console-header"
                style="padding:10px; border-bottom:1px solid #333; font-family:'Orbitron'; color:var(--text-secondary);">
                PROJECT RUNNER LOGS
              </div>
              <div id="project-console-output"
                style="flex:1; padding:10px; font-family:'Consolas','Monospace'; color:#0f0; overflow-y:auto; font-size:12px;">
              </div>
            </div>
          </div>
        </section>

        <!-- SETTINGS TAB -->
        <section id="tab-settings" class="tab-panel">
          <div class="panel-header">
            <h2>System Configuration</h2>
            <div class="controls">
              <button class="btn primary" id="saveSettingsBtn">üíæ Save Configuration</button>
            </div>
          </div>
          <div class="panel-body full" style="overflow-y: auto;">
            <div class="settings-container">

              <!-- MODEL SETTINGS -->
              <div class="info-card">
                <h4>üß† Model Configuration</h4>
                <div class="control-group-vertical">

                  <div class="setting-row">
                    <label class="cyber-label">Active Neural Model</label>
                    <div style="display: flex; gap: 5px; margin-bottom: 5px;">
                      <select id="modelSelector" class="cyber-input" style="flex:1; cursor:pointer;">
                        <option value="">Loading models...</option>
                      </select>
                      <button id="btnLoadModel" class="btn secondary" style="min-width: 80px;">INITIALIZE</button>
                    </div>
                    <input type="text" id="confModelPath" class="cyber-input" placeholder="No Model Loaded" readonly
                      style="color: var(--text-secondary); border-style: dashed; margin-bottom: 5px;">
                    <label class="cyber-label" style="font-size: 0.75em; opacity: 0.7;">Custom Model Path (Overrides
                      Selector)</label>
                    <input type="text" id="confCustomModelPath" class="cyber-input"
                      placeholder="e.g., D:\models\my-custom-model or models/my-custom.gguf">
                  </div>

                  <div class="setting-row">
                    <label class="cyber-label">Start Engine</label>
                    <select id="confModelType" class="cyber-input">
                      <option value="auto">Auto-Detect</option>
                      <option value="quantum">Quantum (27B Superposition)</option>
                      <option value="gguf">GGUF (Llama.cpp)</option>
                      <option value="native">Native (Transformers)</option>
                      <option value="api">API (External)</option>
                    </select>
                  </div>

                  <div class="setting-row grid-2">
                    <div>
                      <label class="cyber-label">Context Window</label>
                      <input type="number" id="confCtx" class="cyber-input">
                    </div>
                    <div>
                      <label class="cyber-label">GPU Layers (-1 for All)</label>
                      <input type="number" id="confGpuLayers" class="cyber-input">
                    </div>
                  </div>

                  <div class="setting-row">
                    <label class="cyber-label">KV Cache Quantization (VRAM Saver)</label>
                    <select id="confCacheType" class="cyber-input">
                      <option value="f16">F16 (High Precision)</option>
                      <option value="q8_0">Q8_0 (Balanced)</option>
                      <option value="q4_0">Q4_0 (Low VRAM)</option>
                    </select>
                  </div>

                </div>
              </div>

              <!-- INFERENCE SETTINGS -->
              <div class="info-card">
                <h4>‚ö° Inference Parameters</h4>
                <div class="control-group-vertical">

                  <div class="setting-row grid-2">
                    <div>
                      <label class="cyber-label">Temperature</label>
                      <input type="number" id="confTemp" step="0.1" min="0" max="2" class="cyber-input">
                    </div>
                    <div>
                      <label class="cyber-label">Max Tokens</label>
                      <input type="number" id="confMaxTokens" class="cyber-input">
                    </div>
                  </div>

                </div>
              </div>

              <div id="settingsMsg" style="margin-top:20px; text-align:center; height:20px;"></div>

            </div>
          </div>
        </section>

      </main>
    </div>

    <!-- TELEMETRY CONSOLE PANEL -->
    <div id="console-panel" class="console-panel draggable glass-panel ar-frame">
      <span class="ar-corner-bl"></span>
      <span class="ar-corner-br"></span>
      <div class="console-header">
        <div class="console-title-group">
          <span class="console-icon">üñ•Ô∏è</span>
          <span class="console-title" style="font-family: 'Orbitron', monospace;">SYSTEM TELEMETRY</span>
        </div>
        <div class="console-controls">
          <button class="console-btn" id="clearConsole" title="Clear Logs">√ò</button>
          <button class="console-btn" id="toggleConsole" title="Toggle Console">_</button>
        </div>
      </div>
      <div class="console-logs" id="consoleLogs">
        <div class="log-entry system"><span class="timestamp">--:--:--</span><span class="type">[SYSTEM]</span>
          Telemetry Console Initialized</div>
      </div>
    </div>

    <!-- FLOATING CHAT PANEL -->
    <div id="chat-panel" class="chat-panel draggable glass-panel ar-frame">
      <div class="chat-header">
        <span class="chat-title">üß† MTI Console</span>
        <button class="chat-toggle" id="chatToggle">‚Äî</button>
      </div>
      <div class="chat-body" id="chatBody">
        <div class="chat-messages" id="chatMessages">
          <div class="msg system">Welcome to MTI-EVO. Type /dream, /interview, or ask a question.</div>
        </div>
        <div class="chat-attachments" id="chatAttachments"></div>
        <div class="chat-input-row">
          <input type="file" id="fileInput" multiple accept="image/*,video/*,.pdf,.txt,.md,.json" hidden />
          <button class="btn ghost file-btn" id="attachBtn" title="Attach file">üìé</button>
          <input id="chatInput" type="text" placeholder="Type message or command..." />
          <button id="chatSend" class="btn primary">‚Üµ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Three.js loaded via importmap -->
  <!-- ATTRACTOR LIST PANEL -->
  <div id="attractorListPanel" class="hud-panel draggable attractor-panel">
    <div class="panel-header" style="justify-content: space-between; cursor: move;">
      <span>ATTRACTOR MANIFEST</span>
      <div>
        <button id="btnExportJSON" class="hud-btn small">EXPORT JSON</button>
        <button id="btnCloseList" class="hud-btn small">X</button>
      </div>
    </div>
    <div class="panel-content" style="flex:1; overflow-y: auto; padding: 0;">
      <table style="width: 100%; border-collapse: collapse; font-family: 'JetBrains Mono', monospace; font-size: 11px;">
        <thead style="position: sticky; top: 0; background: rgba(15, 23, 42, 0.9); z-index: 1;">
          <tr style="border-bottom: 1px solid #334155; text-align: left;">
            <th style="padding: 8px; color: var(--accent-cyan);">SEED</th>
            <th style="padding: 8px; color: var(--text-secondary);">TYPE</th>
            <th style="padding: 8px; color: var(--accent-magenta);">MASS</th>
            <th style="padding: 8px;">ACT</th>
          </tr>
        </thead>
        <tbody id="attractorTableBody">
          <!-- Rows injected here -->
        </tbody>
      </table>
    </div>
    <div class="panel-footer"
      style="padding: 5px; border-top: 1px solid #334155; font-size: 10px; color: var(--text-secondary);">
      Total: <span id="attractorTotalCount" style="color: white;">0</span>
    </div>
  </div>

  <!-- PROBE INSPECTOR OVERLAY -->
  <div id="probeInspector" class="modal-overlay">
    <div class="modal-content cyberpunk-panel">
      <div class="modal-header">
        <h3 id="probeTitle">PROBE: <span class="accent-magenta-text">SCAN_000</span></h3>
        <button class="btn-icon close-btn"
          onclick="document.getElementById('probeInspector').style.display='none'">√ó</button>
      </div>
      <div class="modal-body" style="display: flex; gap: 20px;">
        <div id="probeStats" class="probe-stats-col">
          <!-- Stats injected here -->
        </div>
        <div id="probeChart" class="probe-chart-col">
          <!-- D3 Chart -->
          <svg id="probeSvg" width="100%" height="100%"></svg>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js?v=2.19"></script>
</body>

</html>